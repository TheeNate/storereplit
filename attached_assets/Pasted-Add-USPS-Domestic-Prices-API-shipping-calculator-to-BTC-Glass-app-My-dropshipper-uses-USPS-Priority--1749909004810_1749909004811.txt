Add USPS Domestic Prices API shipping calculator to BTC Glass app
My dropshipper uses USPS Priority Mail, so I need real USPS shipping rates using the USPS Domestic Prices API (v3.4.19).
USPS API Setup Requirements:
1. API Authentication:

Use USPS Domestic Prices API v3 (OAuth2)
Requires USPS Customer Registration and app onboarding
Uses Bearer token authentication in Authorization header

2. Environment Variables:
USPS_CLIENT_ID=DCSUq4zvAWnvDTVBUB1OX2xGNeSAh1XC6ZAxGqzqUxEk0AWi
USPS_CLIENT_SECRET=CwAuep2ACg26xdrCJPbc7iVvDqRe7FABxG1912Unczi53oAG4bggu97AnlrFVQ9W
DROPSHIPPER_ZIP=95928
3. Shipping Rate Calculation:
API Endpoint: /prices/v3/base-rates/search
Package Specifications (based on glass art):

Small glass (6x6, 8x8): 10x10x4 inches, 2 lbs
Medium glass (10x10, 12x12): 14x14x4 inches, 3 lbs
Large glass (16x16+): 22x22x4 inches, 5 lbs

Mail Classes to Request:

Priority Mail (2-3 business days)
Priority Mail Express (1-2 business days)

4. Implementation Requirements:
Create USPS service file (/server/usps-rates.ts):

OAuth2 token management
Rate calculation function
Error handling with fallback rates

Cart Integration:

Require customer zip code for shipping calculation
Show both Priority Mail and Priority Express options
Real-time rate updates when zip code changes

Database Updates:

Add customer_zip, shipping_method, shipping_rate to orders
Store calculated shipping costs with each order

5. User Experience:
Shipping Options Display:
ðŸšš USPS Priority Mail (2-3 business days): $12.50
âš¡ USPS Priority Express (1-2 business days): $28.70
Fallback Rates (if API fails):

Zone 1-3 (nearby): Priority $8-12, Express $25-30
Zone 4-6 (regional): Priority $12-18, Express $30-40
Zone 7-9 (distant): Priority $18-25, Express $40-50

6. API Integration Flow:

Customer enters zip code in cart
App calls USPS API with package dimensions + origin/destination zips
Display Priority Mail and Priority Express rates
Customer selects shipping method
Include shipping cost in payment total
Store shipping details with order

7. Error Handling:

Graceful fallback to zone-based rates if USPS API is down
Clear error messages for invalid zip codes
Retry logic for temporary API failures

Key Benefits:

Real USPS rates matching dropshipper costs
Professional shipping calculation
Transparent pricing for customers
No label creation complexity

API Documentation: Use USPS Domestic Prices API v3.4.19 specification from developers.usps.com  